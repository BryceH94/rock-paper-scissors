<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
  </head>
  <body>
      <h1>Rock Paper Scissors Time!</h1>
      <script>
          function computerPlay() {
              let computerChoice = 'Rock';
              let computerChoiceNum = Math.random();

              if (computerChoiceNum <= 0.33) {
                  computerChoice = 'Paper';
              } else if (computerChoiceNum <= 0.66) {
                  computerChoice = 'Scissors';
              }

              return computerChoice;
          }

          function playRound(playerSelection, computerSelection) {
            let outcome = `Nobody wins! Play the game right next time`;
            let winner = 'Nobody';
            playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1).toLowerCase();
            computerSelection = computerSelection.charAt(0).toUpperCase() + computerSelection.slice(1).toLowerCase();

            if (playerSelection == 'Rock') {
                //Ordered in tie, lose, win
                switch (computerSelection) {
                    case 'Rock':
                        winner = 'Nobody';
                        outcome = `You tie! ${playerSelection} ties ${computerSelection}`;
                        break;
                    case 'Paper':
                        winner = 'Computer';
                        outcome = `You lose! ${computerSelection} beats ${playerSelection}`;
                        break;
                    case 'Scissors':
                        winner = 'Player';
                        outcome = `You win! ${playerSelection} beats ${computerSelection}`;
                        break;
                }
            } else if (playerSelection == 'Paper') {
                switch (computerSelection) {
                    case 'Paper': 
                        winner = 'Nobody';
                        outcome = `You tie! ${playerSelection} ties ${computerSelection}`;
                        break;
                    case 'Scissors':
                        winner = 'Computer';
                        outcome = `You lose! ${computerSelection} beats ${playerSelection}`;
                        break;
                    case 'Rock':
                        winner = 'Player';
                        outcome = `You win! ${playerSelection} beats ${computerSelection}`;
                        break;
                }
            } else if (playerSelection = 'Scissors') {
                switch (computerSelection) {
                    case 'Scissors': 
                        winner = 'Nobody';
                        outcome = `You tie! ${playerSelection} ties ${computerSelection}`;
                        break;
                    case 'Rock':
                        winner = 'Computer';
                        outcome = `You lose! ${computerSelection} beats ${playerSelection}`;
                        break;
                    case 'Paper':
                        winner = 'Player';
                        outcome = `You win! ${playerSelection} beats ${computerSelection}`;
                        break;
                }
            }

            console.log(outcome);
            return winner;
          }

          function game() {
            let playerScore = 0;
            let computerScore = 0;

            for (let i = 0; i < 5; i++) {
                let playerSelection = prompt("Rock, paper, or scissors?");

                winner = playRound(playerSelection, computerPlay());

                if (winner == 'Player') {
                    playerScore++;
                } else if (winner == 'Computer') {
                    computerScore++;
                }
                
                if (playerScore == 3) {
                    console.log(`You won! Final scores: Player ${playerScore}, Computer ${computerScore}`);
                    break;
                } else if (computerScore == 3) {
                    console.log(`You lost! Final scores: Player ${playerScore}, Computer ${computerScore}`);
                    break;
                } else {
                    console.log(`Current score: Player ${playerScore}, Computer ${computerScore}`);
                }
                
            }
          }
      </script>
    
  </body>
</html>